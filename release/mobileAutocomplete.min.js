define(function(require,exports,module){function a(a,c){$.extend(C,c),w=$(a),D=$(C.ulTemplate),T(),g()}function c(a,c){return a.replace(/{{\s*[\w]+\s*}}/g,function(a){return c[a.substr(2,a.length-4)]})}function v(a,c,v){var T;return function(){var $=this,g=arguments,y=function(){T=null,v||a.apply($,g)},h=v&&!T;clearTimeout(T),T=setTimeout(y,c),h&&a.apply($,g)}}function T(){C.keyboardDelay&&(y=v(y,C.keyboardDelay)),C.scrollOnFocus&&w.on("focus",function(){var a=$(this).offset().top;setTimeout(function(){window.scrollTo(0,a)},0)})}function g(){w.on("input",k),$(C.parent).on("click",$(C.itemTemplate).get(0).tagName,S)}function y(a){C.source({term:a},h)}function h(a){b(a),$("html").one("click",O)}function b(a){D.remove(),D=$(C.ulTemplate);for(var i=(w.val(),0);i<a.length&&i<C.maxItems;i++)D.append(c(C.itemTemplate,a[i]));$(C.parent).append(D)}function k(){w.val().length>=C.minChars&&y(w.val()),""==w.val()&&O()}function O(){$("html").off("click"),D.remove()}function S(e){C.onSelect($(e.currentTarget)),C.closeOnSelect&&O()}var w=null,D=null,C={minChars:2,source:null,onSelect:null,scrollOnFocus:!0,maxItems:10,keyboardDelay:300,closeOnSelect:!0,ulTemplate:'<ul class="autocomplete-list"></ul>',itemTemplate:'<li class="autocomplete-item">{{title}}</li>',parent:"body"};module.exports={init:a}});
!function(c,h){function a(c,a){this.$el=h(c),this.$ul=null,this.options=a}a.prototype={config:{minChars:2,source:null,onSelect:null,scrollOnFocus:!0,maxItems:10,keyboardDelay:300,closeOnSelect:!0,ulTemplate:'<ul class="autocomplete-list"></ul>',itemTemplate:'<li class="autocomplete-item">{{title}}</li>',parent:"body"},init:function(){return this.config=h.extend(this.config,this.options),this.$ul=h(this.config.ulTemplate),this.setupSettings(),this.setupEvents(),this},setupSettings:function(){if(h.isArray(this.config.source)?this.request=function(c){this.response(this.filter(this.config.source,c))}:this.config.keyboardDelay&&(this.request=this.debounce(this.request,this.config.keyboardDelay)),this.config.scrollOnFocus){var a=this;this.$el.on("focus",function(){var h=a.$el.offset().top;setTimeout(function(){c.scrollTo(0,h)},0)})}},setupEvents:function(){this.$el.on("input",h.proxy(this.onInput,this)),h(this.config.parent).on("click",h(this.config.itemTemplate).get(0).tagName,h.proxy(this.onClickItem,this))},request:function(c){this.config.source({term:c},h.proxy(this.response,this))},response:function(c){this.renderItemsFlat(c),h("html").one("click",h.proxy(this.closeList,this))},renderItemsFlat:function(c){this.$ul.remove(),this.$ul=h(this.config.ulTemplate);for(var i=(this.$el.val(),0);i<c.length&&i<this.config.maxItems;i++)this.$ul.append(this.template(this.config.itemTemplate,c[i]));h(this.config.parent).append(this.$ul)},onInput:function(){this.$el.val().length>=this.config.minChars&&this.request(this.$el.val()),""==this.$el.val()&&this.closeList()},closeList:function(){h("html").off("click"),this.$ul.remove()},onClickItem:function(e){this.config.onSelect(h(e.currentTarget)),this.config.closeOnSelect&&this.closeList()},escapeRegex:function(c){return c.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(c,a){var g=new RegExp(this.escapeRegex(a),"i");return h.grep(c,function(c){return g.test(c)})},template:function(c,h){return c.replace(/{{\s*[\w]+\s*}}/g,function(c){return h[c.substr(2,c.length-4)]||h})},debounce:function(c,h,a){var g;return function(){var $=this,v=arguments,y=function(){g=null,a||c.apply($,v)},T=a&&!g;clearTimeout(g),g=setTimeout(y,h),T&&c.apply($,v)}}},h.fn.mAutocomplete=function(c){return this.each(function(){if(this.mAutocomplete)return h.extend(this.mAutocomplete.config,c),this;var d=new a(this,c).init();this.mAutocomplete={config:d.config}})}}(window,$);